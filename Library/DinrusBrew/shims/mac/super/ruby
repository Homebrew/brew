#!/bin/bash

# System Ruby's mkmf on Mojave (10.14) and later require SDKROOT set to work correctly.

# DINRUSBREW_LIBRARY is set by bin/brew
# DINRUSBREW_SDKROOT is set by extend/ENV/super.rb
# shellcheck disable=SC2154
source "${DINRUSBREW_LIBRARY}/DinrusBrew/shims/utils.sh"

try_exec_non_system "${SHIM_FILE}" "$@"

if [[ -z "${SDKROOT}" && -n "${DINRUSBREW_SDKROOT}" ]]
then
  export SDKROOT="${DINRUSBREW_SDKROOT}"
fi

safe_exec "/usr/bin/${SHIM_FILE}" "$@"
